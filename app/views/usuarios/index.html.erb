<div class="content-heading">
  <div>Usuarios
    <small>Usuarios de la plataforma.</small>
  </div>
</div>
<div class="container-fluid">
  <%#Card%>
  <div class="card card-default">
    <%#Card Header%>
    <div class="card-header">
      <%#Card Body%>
      <div class="card-body whirl standard" id="cardtablebody">
        <div class="row">
          <div class="col">
            <div class="float-right">
              <% if permitido?('usuarios', 'new') %>
                <a class="btn btn-primary" href="<%= new_usuario_path %>" role="button">Nuevo Usuario</a>
              <% end %>
            </div>
          </div>
        </div>
        <div class="space-15">
          <br>
        </div>
        <div class="row">
          <div class="col-sm-12">
            <table class="table table-striped my-4 w-100" id="usuariostable">
              <thead class>
              <tr class>
                <th>ID</th>
                <th>Nombre de Usuario</th>
                <th>Legajo</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>DNI</th>
                <th>Email</th>
                <th>Teléfono</th>
                <th>Celular</th>
                <th>Descripción</th>
                <th>Fecha de Nacimiento</th>
                <th>Sexo</th>
                <th>Nacionalidad</th>
                <th>Dirección</th>
                <th>Localidad</th>
                <th>Provincia</th>
                <th>Pais</th>
                <th>Rol</th>
                <th>Carrera</th>
                <th>Fecha Creación</th>
                <th>Fecha Modificación</th>
                <th>Fecha Baja</th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
              </thead>
              <tbody>
              <% @usuarios.each do |usuario| %>
                <tr>
                  <td><%= usuario.id %></td>
                  <td><%= usuario.nombre_usuario %></td>
                  <td><%= usuario.legajo %></td>
                  <td><%= usuario.nombre %></td>
                  <td><%= usuario.apellido %></td>
                  <td><%= usuario.dni %></td>
                  <td><%= usuario.email %></td>
                  <td><%= usuario.telefono %></td>
                  <td><%= usuario.celular %></td>
                  <td><%= usuario.descripcion %></td>
                  <td><%= usuario.fecha_nacimiento %></td>
                  <td><%= usuario.sexo %></td>
                  <td><%= usuario.nacionalidad %></td>
                  <td><%= usuario.direccion %></td>
                  <td><%= usuario.localidad %></td>
                  <td><%= usuario.provincia %></td>
                  <td><%= usuario.pais %></td>
                  <td><%= usuario.rol.nombre %></td>
                  <td>
                    <% if usuario.rol.grupo == 'Alumnos' %>
                      <%= usuario.carrera.nombre %>
                    <% else %>
                      -
                    <% end %>
                  </td>
                  <td><%= usuario.created_at %></td>
                  <% if usuario.created_at == usuario.updated_at %>
                    <td><%= "-" %></td>
                  <% else %>
                    <td><%= usuario.updated_at %></td>
                  <% end %>
                  <td><%= usuario.fecha_baja %></td>
                  <% if permitido?('usuarios', 'show') %>
                    <td><%= link_to 'Mostrar', usuario, class: "mb-1 btn btn-primary" %></td>
                  <% else %>
                    <td><%= link_to 'Mostrar', root_path, class: "mb-1 btn btn-primary disabled" %></td>
                  <% end %>
                  <% if permitido?('usuarios', 'edit') %>
                    <td><%= link_to 'Editar', edit_usuario_path(usuario), class: "mb-1 btn btn-info" %></td>
                  <% else %>
                    <td><%= link_to 'Editar', root_path, class: "mb-1 btn btn-info disabled" %></td>
                  <% end %>
                  <td>
                    <% if permitido?('usuarios', 'destroy') %>
                      <% if usuario.fecha_baja.nil? %>
                        <%= link_to 'Baja', usuario, method: :delete, class: "mb-1 btn btn-warning", data: { title: 'Baja Usuario', confirm: '¿Est&aacute;s seguro que quieres dar de baja al usuario? <br> Al dar de baja un usuario se cancelan todos sus registros.', commit: 'Si', cancel: 'No', "cancel-class": 'mb-1 btn btn-secondary', "commit-class": 'mb-1 btn btn-danger', focus: '' } %>
                      <% else %>
                        <%= link_to 'Restaurar', usuario, method: :delete, class: "mb-1 btn btn-warning", data: { title: 'Restaurar Usuario', confirm: '¿Est&aacute;s seguro que quieres restaurar al usuario ' + usuario.id.to_s + ': ' + usuario.nombre + ' ' + usuario.apellido + '?', commit: 'Si', cancel: 'No', "cancel-class": 'mb-1 btn btn-secondary', "commit-class": 'mb-1 btn btn-danger', focus: '' } %>
                      <% end %>
                    <% else %>
                      <% if usuario.fecha_baja.nil? %>
                        <a class="mb-1 btn btn-warning disabled">Baja</a>
                      <% else %>
                        <a class="mb-1 btn btn-warning disabled">Restaurar</a>
                      <% end %>
                    <% end %>
                  </td>
                </tr>
              <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
